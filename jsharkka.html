<!DOCTYPE html>
<html lang="en">
<head>

<title>R3 DEMO</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="index.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

</head>
<body>

<div class="container">
<div id="root"></div>
</div>

<script type="text/babel">







class PaymentInput extends React.Component { 			//luokka, jossa luodaan maksun syötettävän tiedon kentät
	constructor(props) {
		super(props);
		this.emptyState = {from: "", to: "", date: "", sum: "", id: ""};
		this.state = this.emptyState;
		this.handleChange = this.handleChange.bind(this);
		this.handleSubmit = this.handleSubmit.bind(this);
	}

	handleChange(event) { 
		this.setState({[event.target.name]: event.target.value});
	}

	handleSubmit(event) { 					//käsittelee "lisää"-napilla syötetyt tiedot 
		if (this.isValidPayment()) {
			this.state.from = this.state.from.trim();
			this.state.to = this.state.to.trim();
			this.state.date = this.state.date.trim();
			this.state.sum = parseFloat(this.state.sum.replace(",", "."));
			this.state.id = Date.now();

			this.props.addPayment(this.state);
			this.setState(this.emptyState);
		}
		event.preventDefault();
	}

	isValidPayment() { 					//tarkistetaan, että syöttökentissä on oikeamuotoiset arvot
		return this.isValidName(this.state.from) && this.isValidName(this.state.to) && this.isValidDate(this.state.date) && this.isValidSum(this.state.sum);
	}

	isValidDate(date) { 					//tarkistaa päivämäärän
		return date.trim() !== "";
	}

	isValidName(name) { 					//tarkistaa nimen
		return name.trim() !== "";
	}

	isValidSum(sum) { 					//tarkistaa summan
		return !isNaN(parseFloat(sum.replace(",", ".")));
	}

	render() { 						//syötekentät
		return (
			<form className="mt-3" onSubmit={this.handleSubmit}>
				<div className="form-row align-items-end">
					<div className="form-group col-lg-4"><label className="col-form-label" htmlFor="inputTo">Laskuttava yritys</label><input type="text" name="to" value={this.state.to} className="form-control" id="inputTo" onChange={this.handleChange} /></div>
					<div className="form-group col-lg-2"><label className="col-form-label" htmlFor="inputDate">Maksupäivämäärä</label><input type="text" name="date" value={this.state.date} className="form-control" id="inputDate" onChange={this.handleChange} /></div>
					<div className="form-group col-lg-1"><label className="col-form-label" htmlFor="inputSum">Summa</label><input type="text" name="sum" value={this.state.sum} className="form-control" id="inputSum" onChange={this.handleChange} /></div>
					<div className="form-group col-lg-4"><label className="col-form-label" htmlFor="inputFrom">Laskun maksaja</label><input type="text" name="from" value={this.state.from} className="form-control" id="inputFrom" onChange={this.handleChange} /></div>
					<div className="form-group col-lg-1">{this.isValidPayment() && <button type="submit" className="btn btn-primary btn-block">Lisää</button>}</div>
				</div>
			</form>
		);
	}
}











</script>

<!-- https://getbootstrap.com/docs/4.4/getting-started/introduction/#js -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>
</html>
